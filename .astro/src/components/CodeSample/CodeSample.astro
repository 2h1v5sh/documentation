---
import { Prism } from "@astrojs/prism"

import fs from "node:fs/promises"
import path from "node:path"

export type Props = {
  src: string
  lang?: string
}
const { src, lang } = Astro.props as Props

const data = (
  await fs.readFile(path.join(process.cwd(), "public", src), "utf-8")
).toString()

const isSample = src.indexOf("samples/") === 0 || src.indexOf("/samples/") === 0
---

<Prism code={data} lang={"solidity"} />
{isSample && (
  <div class="remix-callout">
    <a
      href={`https://remix.ethereum.org/#url=https://docs.chain.link/${src}`}
      target="_blank"
    >
      Open in Remix
    </a>
    <a href="/docs/conceptual-overview/#what-is-remix">What is Remix?</a>
  </div>
)}
